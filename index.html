<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Jost:wght@500&display=swap" rel="stylesheet">
    <title>تسجيل الدخول - منصة حفلات</title>
    <style>
      body{
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      font-family: 'Jost', sans-serif;
      background: linear-gradient(to bottom, #0f0c29, #302b63, #24243e);
      }
      .main{
        width: 350px;
        height: 500px;
        background: red;
        overflow: hidden;
        background: url("img/login-bg.jpg") no-repeat center/ cover;
        border-radius: 10px;
        box-shadow: 5px 20px 50px #000;
      }
      #chk{
        display: none;
      }
      .signup{
        position: relative;
        width:100%;
        height: 100%;
      }
      label{
        color: #fff;
        font-size: 2.3em;
        justify-content: center;
        display: flex;
        margin: 50px;
        font-weight: bold;
        cursor: pointer;
        transition: .5s ease-in-out;
      }
      input{
        width: 60%;
        height: 10px;
        background: #e0dede;
        justify-content: center;
        display: flex;
        margin: 20px auto;
        padding: 12px;
        border: none;
        outline: none;
        border-radius: 5px;
      }
      button{
        width: 60%;
        height: 40px;
        margin: 10px auto;
        justify-content: center;
        display: block;
        color: #fff;
        background: #573b8a;
        font-size: 1em;
        font-weight: bold;
        margin-top: 30px;
        outline: none;
        border: none;
        border-radius: 5px;
        transition: .2s ease-in;
        cursor: pointer;
      }
      button:hover{
        background: #6d44b8;
      }
      .login{
        height: 460px;
        background: #eee;
        border-radius: 60% / 10%;
        transform: translateY(-180px);
        transition: .8s ease-in-out;
      }
      .login label{
        color: #573b8a;
        transform: scale(.6);
      }

      #chk:checked ~ .login{
        transform: translateY(-500px);
      }
      #chk:checked ~ .login label{
        transform: scale(1);	
      }
      #chk:checked ~ .signup label{
        transform: scale(.6);
      }
    </style>
  </head>
  <body>
    <div id="userWelcome" style="position:fixed;top:12px;inset-inline:12px auto;background:#ffffff22;color:#fff;padding:8px 12px;border-radius:8px;border:1px solid #ffffff44;backdrop-filter: blur(6px);display:none;z-index:10;font-weight:600"></div>
    <div class="main">		
      <input type="checkbox" id="chk" aria-hidden="true">
        <div class="signup">
          <form id="signupForm">
            <label for="chk" aria-hidden="true">إنشاء حساب</label>
            <input type="text" name="txt" placeholder="اسم المستخدم" required>
            <input type="email" name="email" placeholder="البريد الإلكتروني" required>
            <input type="password" name="pswd" placeholder="كلمة المرور" required>
            <button type="submit">إنشاء حساب</button>
          </form>
        </div>

        <div class="login">
          <form id="loginForm">
            <label for="chk" aria-hidden="true">تسجيل الدخول</label>
            <input type="text" name="text" placeholder="اسم المستخدم"  required>
            <input type="password" name="pswd" placeholder="كلمة المرور" required>
            <button type="submit">تسجيل الدخول</button>
          </form>
        </div>
    </div>
    <script>
      (function(){
        const loginForm = document.getElementById('loginForm');
        const signupForm = document.getElementById('signupForm');
        const chk = document.getElementById('chk');
        const params = new URLSearchParams(window.location.search);
        if (params.get('signup') === '1' && chk) { chk.checked = true; }
        function showWelcome(){
          try{
            const uw = document.getElementById('userWelcome');
            const uname = localStorage.getItem('username');
            if (uw && uname){ uw.textContent = 'مرحباً، ' + uname; uw.style.display='block'; }
          }catch(e){}
        }
        function goHome(msg){ try{ alert(msg); }catch(e){} window.location.href='home.html'; }
        // عرض الاسم إن كان محفوظاً مسبقاً
        showWelcome();
        if (loginForm){
          loginForm.onsubmit = function(e){
            e.preventDefault();
            const usernameRaw = (loginForm.querySelector('input[name="text"]')?.value || '').trim();
            const username = usernameRaw.toLowerCase();
            const password = (loginForm.querySelector('input[name="pswd"]')?.value || '').trim();
            const validUser = username === 'gamal' || username === 'myadah';
            const validPass = password === '123';
            if (validUser && validPass) {
              try{ localStorage.setItem('username', usernameRaw); }catch(e){}
              goHome('تم تسجيل الدخول بنجاح');
            } else {
              alert('اسم المستخدم أو كلمة السر غير صحيحة');
            }
          };
        }
        if (signupForm){
          signupForm.onsubmit = function(e){ 
            e.preventDefault(); 
            const newUser = (signupForm.querySelector('input[name="txt"]')?.value || '').trim();
            try{ if(newUser) localStorage.setItem('username', newUser); }catch(_){}
            goHome('تم إنشاء الحساب وتسجيل الدخول'); 
          };
        }
      })();
    </script>
  </body>
 </html>